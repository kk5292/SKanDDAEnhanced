<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Home | SKanDDA</title>

  <!-- Core CSS Files -->
  <link rel="stylesheet" href="css/01_base.css?v=20251028d" />
  <link rel="stylesheet" href="css/02_layout.css?v=20251028d" />
  <link rel="stylesheet" href="css/03_hero.css?v=20251028d" />
  <link rel="stylesheet" href="css/04_products.css?v=20251028d" />
  <link rel="stylesheet" href="css/05_cart_checkout.css?v=20251028d" />
  <link rel="stylesheet" href="css/06_pages_responsive.css?v=20251028d" />

  <!-- keep original JS entries; home-products.js replaced below -->
  <script src="js/scroll-animations.js" defer></script>
  <script src="js/products.js" defer></script>
  <script src="js/home-products.js?v=20251029" defer></script>

  <style>
    /* Preserved original inline styles with small targeted additions
       (kept exactly as your original file but added a couple of safe helpers) */

    body {
      background: url("assets/home-hero.png") center/cover no-repeat fixed;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      color: #fff;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 60px;
      background: rgba(0, 0, 0, 0.25);
      backdrop-filter: blur(5px);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    header a,
    nav a {
      color: #fff !important;
      text-decoration: none;
    }

    nav a:hover,
    nav a.active {
      color: #ff5b00 !important;
    }

    .logo img {
      height: 50px;
    }

    #desktop-nav {
      display: flex;
      align-items: center;
    }

    #mobile-nav,
    .mobile-actions,
    .menu-toggle {
      display: none;
    }

    .hero-full {
      flex: 1;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      padding: 100px 20px;
      background: none;
      -webkit-backdrop-filter: none;
      backdrop-filter: none;
      z-index: 1;
    }

    .hero-full::before {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.18);
      z-index: 0;
      pointer-events: none;
    }

    .hero-full > * {
      position: relative;
      z-index: 1;
    }

    .hero-full h1 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      line-height: 1.05;
      text-shadow: 0 1px 2px rgba(0,0,0,0.35);
    }

    .hero-full p {
      max-width: 600px;
      margin: 0 auto;
      font-size: 1.2rem;
      line-height: 1.6;
      text-shadow: 0 1px 2px rgba(0,0,0,0.25);
    }

    .home-products-section {
      padding: 80px 20px;
      text-align: center;
      background: rgba(0, 0, 0, 0.25);
    }

    .home-products-section h2 {
      font-size: 28px;
      margin-bottom: 30px;
    }

    footer {
      margin-top: auto;
      text-align: center;
      padding: 20px;
      color: #fff;
      background: rgba(0, 0, 0, 0.25);
      z-index: 50;
    }

    .social-footer a {
      text-decoration: none;
      border: none;
      outline: none;
    }

    /* ===== Additional small fixes =====
       1) Ensure carousel tiles are compact and consistent across phones (avoids iPhone vs Samsung difference)
       2) Hide native scrollbar visually but keep scrollable
       3) Add accessible larger tap target for the mobile menu
    */
    .home-products-carousel .hp-track {
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    .home-products-carousel .hp-track::-webkit-scrollbar { display: none; }

    /* We use a flexible min-width in CSS but the script also enforces exact widths to handle DPR differences */
    .home-products-carousel .hp-item { min-width: 160px; box-sizing: border-box; }

    .menu-toggle { /* ensure large touch target */
      background: none;
      border: none;
      color: #fff;
      font-size: 20px;
      padding: 8px;
      display: inline-block;
    }

    @media (max-width: 900px) {
      header {
        padding: 15px 15px;
        background: rgba(0, 0, 0, 0.35);
      }

      #desktop-nav {
        display: none !important;
      }

      .mobile-actions {
        display: flex !important;
        align-items: center;
        gap: 15px;
        margin-left: auto;
      }

      .menu-toggle {
        display: block !important;
        cursor: pointer;
      }

      #mobile-nav {
        display: none;
        position: absolute;
        top: 80px;
        left: 0;
        width: 100%;
        background: rgba(0, 0, 0, 0.9);
        flex-direction: column;
        padding: 15px 0;
        z-index: 90;
      }

      #mobile-nav.active {
        display: flex;
      }

      #mobile-nav a {
        padding: 12px 20px;
        width: 100%;
        display: block;
        text-align: left;
        font-size: 1.1em;
      }

      .hero-full {
        padding: 80px 20px;
      }

      /* ensure extra gap between title and paragraph on narrow screens */
      .hero-full h1 { margin-bottom: 14px; }
    }

    @media (min-width: 901px) {
      #mobile-nav {
        display: none !important;
      }

      .mobile-actions {
        display: none;
      }

      #desktop-nav {
        display: flex !important;
      }
    }
  </style>
</head>

<body>
  <header>
    <a href="index.html" class="logo-link" id="logo-link" aria-label="Home">
      <div class="logo">
        <img src="assets/logo.png" alt="SKanDDA Logo" />
      </div>
    </a>

    <nav id="desktop-nav">
      <a href="index.html" class="active">Home</a>
      <a href="products.html">Products</a>
      <a href="about.html">About Us</a>
      <a href="contact.html">Contact Us</a>
      <a href="cart.html" class="cart-icon-desktop">ðŸ›’ (<span id="cart-count-desktop">0</span>)</a>
    </nav>

    <div class="mobile-actions">
      <a href="cart.html" class="cart-icon-desktop">ðŸ›’ (<span id="cart-count-mobile">0</span>)</a>
      <button class="menu-toggle" aria-label="Toggle Menu" aria-controls="mobile-nav" aria-expanded="false">
        <svg viewBox="0 0 100 80" width="24" height="24" fill="currentColor" aria-hidden="true">
          <rect width="100" height="15" rx="8"></rect>
          <rect y="30" width="100" height="15" rx="8"></rect>
          <rect y="60" width="100" height="15" rx="8"></rect>
        </svg>
      </button>
    </div>
  </header>

  <nav id="mobile-nav" aria-hidden="true">
    <a href="index.html" class="active">Home</a>
    <a href="products.html">Products</a>
    <a href="about.html">About Us</a>
    <a href="contact.html">Contact Us</a>
  </nav>

  <section class="hero-full">
    <h1>From Our Roots to Your Home</h1>
    <p>SKanDDA brings together the essence of India â€” flavours, fashion, and festive gifting â€” for the families who make UAE feel like home.</p>
  </section>

  <section class="home-products-section fade-up">
    <h2>Our Products</h2>
    <div class="home-products-carousel" id="home-products-carousel">
      <!-- Dynamic JS content -->
    </div>
  </section>

  <footer>
    <div class="social-footer">
      <a href="https://www.facebook.com/share/1CggjdtjkN/?mibextid=wwXIfr" target="_blank" aria-label="Facebook">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="#fff" aria-hidden="true">
          <path d="M22 12a10 10 0 1 0-11.5 9.9v-7H8v-3h2.5V9.5c0-2.5 1.5-3.9 3.8-3.9 1.1 0 2.2.2 2.2.2v2.5h-1.3c-1.3 0-1.7.8-1.7 1.6v1.9H19l-.5 3h-2v7A10 10 0 0 0 22 12z"/>
        </svg>
      </a>
      <a href="https://www.instagram.com/skandda.ae?igsh=YjEwMnVqMXJzNG01" target="_blank" aria-label="Instagram">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="#fff" aria-hidden="true">
          <path d="M12 2.2c3.2 0 3.6.012 4.8.07 1.17.056 1.97.24 2.44.41a4.9 4.9 0 0 1 1.78 1.16 4.9 4.9 0 0 1 1.16 1.78c.17.47.35 1.27.41 2.44.058 1.18.07 1.6.07 4.8s-.012 3.6-.07 4.8c-.056 1.17-.24 1.97-.41 2.44a4.9 4.9 0 0 1-1.16 1.78 4.9 4.9 0 0 1-1.78 1.16c-.47.17-1.27.35-2.44.41-1.18.058-1.6.07-4.8.07s-3.6-.012-4.8-.07c-1.17-.056-1.97-.24-2.44-.41a4.9 4.9 0 0 1-1.78-1.16 4.9 4.9 0 0 1-1.16-1.78c-.17-.47-.35-1.27-.41-2.44C2.212 15.6 2.2 15.2 2.2 12s.012-3.6.07-4.8c.056-1.17.24-1.97.41-2.44a4.9 4.9 0 0 1 1.16-1.78 4.9 4.9 0 0 1 1.78-1.16c.47-.17 1.27-.35 2.44-.41C8.4 2.212 8.8 2.2 12 2.2z"/>
          <circle cx="12" cy="12" r="3.2"/>
        </svg>
      </a>
      <a href="https://wa.me/971581268198" target="_blank" aria-label="WhatsApp">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="#fff" aria-hidden="true">
          <path d="M20.5 3.5A11.9 11.9 0 0 0 12 0C5.373 0 0 5.373 0 12c0 2.12.554 4.105 1.6 5.85L0 24l6.35-1.575A11.94 11.94 0 0 0 12 24c6.627 0 12-5.373 12-12 0-3.19-1.24-6.18-3.5-8.5z"/>
        </svg>
      </a>
    </div>
    <p>&copy; 2025 SKanDDa Worldwide LLC. All Rights Reserved.</p>
  </footer>

  <script>
    // Robust mobile menu toggle: close when a nav link or the logo is clicked, and close on resize > 900
    (function () {
      const menuToggle = document.querySelector(".menu-toggle");
      const mobileNav = document.getElementById("mobile-nav");
      const logoLink = document.getElementById("logo-link");
      const mobileLinks = mobileNav ? Array.from(mobileNav.querySelectorAll("a")) : [];

      if (!menuToggle || !mobileNav) {
        // nothing to do
      } else {
        menuToggle.addEventListener("click", function (e) {
          e.stopPropagation();
          const active = mobileNav.classList.toggle("active");
          menuToggle.setAttribute("aria-expanded", active ? "true" : "false");
          mobileNav.setAttribute("aria-hidden", active ? "false" : "true");
        });

        // close menu when clicking mobile nav links
        mobileLinks.forEach(link => {
          link.addEventListener("click", function () {
            if (mobileNav.classList.contains("active")) {
              mobileNav.classList.remove("active");
              menuToggle.setAttribute("aria-expanded", "false");
              mobileNav.setAttribute("aria-hidden", "true");
            }
          });
        });

        // close when clicking logo/home
        if (logoLink) {
          logoLink.addEventListener("click", function () {
            if (mobileNav.classList.contains("active")) {
              mobileNav.classList.remove("active");
              menuToggle.setAttribute("aria-expanded", "false");
              mobileNav.setAttribute("aria-hidden", "true");
            }
          });
        }

        // close mobile nav when clicking outside
        document.addEventListener("click", function (e) {
          if (!mobileNav.contains(e.target) && !menuToggle.contains(e.target) && mobileNav.classList.contains("active")) {
            mobileNav.classList.remove("active");
            menuToggle.setAttribute("aria-expanded", "false");
            mobileNav.setAttribute("aria-hidden", "true");
          }
        });

        // ensure menu closed when resizing to desktop
        window.addEventListener("resize", function () {
          if (window.innerWidth > 900 && mobileNav.classList.contains("active")) {
            mobileNav.classList.remove("active");
            menuToggle.setAttribute("aria-expanded", "false");
            mobileNav.setAttribute("aria-hidden", "true");
          }
        });
      }
    })();

    // --- CART COUNT LOADER (keeps original logic) ---
    document.addEventListener("DOMContentLoaded", function () {
      function updateCartCount() {
        try {
          const cart = JSON.parse(localStorage.getItem("cart")) || [];
          const count = cart.reduce((sum, item) => sum + (item.quantity || 0), 0);
          document.querySelectorAll("#cart-count-desktop, #cart-count-mobile").forEach(el => {
            if (el) el.textContent = count;
          });
        } catch {
          document.querySelectorAll("#cart-count-desktop, #cart-count-mobile").forEach(el => {
            if (el) el.textContent = 0;
          });
        }
      }
      updateCartCount();
      window.addEventListener("storage", updateCartCount);
    });
  </script>
</body>
</html>