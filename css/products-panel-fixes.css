/* Products panel & product-detail mobile fixes
   - Prevent horizontal overflow/page-level scroll
   - Constrain left category panel to viewport height and allow only vertical scroll (no horizontal)
   - Make product detail image full-width on narrow screens so info doesn't overlay the image
   - Small safety rules to avoid layout overflow from long strings
*/

/* Prevent page-level horizontal overflow caused by elements slightly wider than viewport */
html, body {
  box-sizing: border-box;
  overflow-x: hidden; /* prevent bottom horizontal scrollbar */
}

/* Make sure all elements use border-box by default for consistent sizing */
*, *::before, *::after {
  box-sizing: inherit;
}

/* CATEGORY / LEFT PANEL
   - ensure the category panel/list scrolls vertically inside the viewport
   - hide horizontal overflow explicitly
   - make touch scroll smooth on iOS
*/
#category-panel, .category-panel, #product-panel {
  box-sizing: border-box;
  overflow-x: hidden; /* no horizontal scroll inside panels */
}

/* If your category list is long, make it scroll vertically but constrained to viewport */
#category-panel .category-list,
#category-panel,
#category-panel .subcategory-list,
#filter-subcategories {
  max-height: calc(100vh - 120px); /* leave room for header (adjust if header is taller) */
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  padding-right: 8px; /* reserve space so vertical scrollbar doesn't shift layout */
}

/* Prevent long words or labels from causing horizontal overflow */
#category-panel .category-item,
#category-panel .subcategory-item,
#category-panel .subsubcategory-item,
#filter-subcategories label,
#filter-subcategories span {
  word-break: break-word;
  white-space: normal;
}

/* PRODUCT GRID / CARDS - safety */
.product-grid, .product-card, .product-card * {
  box-sizing: border-box;
}

/* PRODUCT DETAIL LAYOUT
   On mobile (<= 768px) force column stacking with full-width image column and normal document flow for info.
   Remove inline JS-imposed flex-basis for imgCol on narrow viewports by overriding styles with !important (safe and targeted).
*/
.product-detail.product-detail-flex {
  display: flex; /* JS already sets this */
  gap: 20px;
  align-items: flex-start;
}

/* Mobile-specific fixes */
@media (max-width: 768px) {
  .product-detail.product-detail-flex {
    flex-direction: column !important;
    align-items: stretch !important;
  }

  /* make the image column full width and allow the image to size naturally */
  .product-image-col, .product-img-col, .product-image-col img, .product-image-col .img-wrapper {
    width: 100% !important;
    max-width: 100% !important;
    flex: 0 0 auto !important;
  }

  .product-image-col img, .product-image-col .img-wrapper img {
    width: 100% !important;
    height: auto !important;
    max-height: none !important;
    object-fit: contain !important;
    display: block !important;
  }

  /* Ensure info column sits below the image on mobile and doesn't overlap */
  .product-info-col, .product-info {
    width: 100% !important;
    max-width: 100% !important;
    margin-top: 12px !important;
    z-index: 2; /* above image badges if necessary */
  }

  /* Ensure badges on the image are positioned but do not push content */
  .product-image-col .discount-label,
  .product-image-col .avail-badge,
  .product-image-col .new-badge,
  .product-image-col .trending-badge {
    position: absolute;
    z-index: 30;
    top: 8px;
    right: 8px;
    transform: none;
  }
}

/* Horizontal scrollbar at bottom often originates from very wide hero overlay or fixed width elements.
   Avoid a fixed max-width that can expand beyond viewport. Make hero overlay responsive.
*/
#hero-carousel-overlay, .hero-wrapper, .hero-carousel-overlay {
  max-width: 100%;
  box-sizing: border-box;
  overflow: visible;
}

/* Misc: prevent small scroll jank by disallowing selection while dragging */
.product-grid, .product-card, .hp-track, .hp-item {
  -webkit-user-select: none;
  user-select: none;
}

/* If you still have a horizontal scrollbar, this rule will highlight the overflowing element (temporary debug).
   Uncomment while debugging, then remove it after you identify the culprit.
*/
/*
* {
  outline: 1px dashed rgba(255,0,0,0.06);
}
*/

/* products-detail-fixes.css
   Safe, additive fixes to:
   - keep product detail image from growing too large
   - stop product-info from overlapping the image on mobile
   - ensure product info column can shrink (no overflow) on narrow screens
   - render highlights/tags as compact badges (not long full-width lines)
   - ensure image badges (NEW/OFFER/etc.) do not push content
   Add this file after your existing CSS (or append contents at end of main CSS).
*/

/* --- Layout: allow safe wrapping and prevent overlap --- */
.product-detail.product-detail-flex {
  display: flex;               /* JS already sets this */
  gap: 20px;
  align-items: flex-start;
  flex-wrap: wrap;             /* allow columns to wrap instead of overlap */
  width: 100%;
  box-sizing: border-box;
}

/* Image column: constrain on desktop but make responsive on mobile */
.product-image-col,
.product-img-col,
.product-image-col .img-wrapper {
  box-sizing: border-box;
  width: 100%;
  max-width: 480px;           /* reasonable desktop image column width */
  flex: 0 0 45%;              /* desktop default (JS inline style may set this) */
  min-width: 0;               /* allow shrinking */
}

/* Image element: cap height, keep aspect, avoid excessive growth */
.product-image-col img,
.product-image-col .img-wrapper img {
  width: 100%;
  height: auto;               /* allow natural height; JS may set maxHeight, override for smaller screens */
  max-height: 420px;
  object-fit: contain;
  display: block;
}

/* Info column: take remaining space, allow shrink (min-width:0 prevents flex overflow) */
.product-info-col,
.product-info {
  box-sizing: border-box;
  flex: 1 1 50%;
  min-width: 0;               /* important so text truncation/ellipses work inside flex */
  z-index: 2;
  width: 100%;
}

/* Ensure headings and text wrap and don't overflow */
.product-info-col h2,
.product-info-col p,
.product-info-col .weight-price,
.product-info-col .product-benefit {
  word-break: break-word;
  overflow-wrap: anywhere;
}

/* Buttons/qty area: keep layout tidy */
.qty-selector { display: inline-flex; gap: 8px; align-items: center; }
.qty-selector button { min-width: 28px; min-height: 28px; padding: 4px 6px; }

/* Badges positioned absolutely over image (do not affect layout flow) */
.product-image-col .discount-label,
.product-image-col .avail-badge,
.product-image-col .new-badge,
.product-image-col .trending-badge {
  position: absolute;
  top: 8px;
  right: 8px;
  display: inline-block;
  z-index: 40;
  padding: 6px 8px;
  font-weight: 700;
  border-radius: 6px;
  white-space: nowrap;
  transform: none;
  box-shadow: 0 6px 12px rgba(0,0,0,0.18);
}

/* If multiple badges exist, stack them vertically (so they don't grow horizontally) */
.product-image-col .discount-label + .new-badge,
.product-image-col .discount-label + .trending-badge,
.product-image-col .new-badge + .trending-badge,
.product-image-col .new-badge + .discount-label {
  margin-top: 6px;
}

/* Highlights/tags list -> render as small badges rather than long paragraphs */
.highlights-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 8px 0 0 0;
  padding: 0;
  list-style: none;
}
.highlights-list li {
  display: inline-block;
  background: rgba(255,255,255,0.04);
  color: #fff;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 0.9rem;
  white-space: nowrap;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  box-sizing: border-box;
}

/* Product benefit and other short meta should not grow full-width as long lines */
.product-benefit {
  margin: 8px 0;
  color: rgba(255,255,255,0.9);
  font-size: 0.95rem;
}

/* Make sure long select/options don't overflow container */
.variant-select { width: 100%; max-width: 280px; box-sizing: border-box; }

/* Make product grid/cards safe (prevent unexpected horizontal scrolling) */
.product-grid, .product-card {
  box-sizing: border-box;
  max-width: 100%;
  overflow: visible;
}

/* --- Mobile adjustments: image full width, info stacked below image (prevents overlay) --- */
@media (max-width: 768px) {
  .product-detail.product-detail-flex {
    flex-direction: column !important;
    align-items: stretch !important;
  }

  .product-image-col,
  .product-img-col,
  .product-image-col .img-wrapper {
    flex: 0 0 auto !important;   /* remove forced 45% */
    width: 100% !important;
    max-width: 100% !important;
  }

  .product-image-col img,
  .product-image-col .img-wrapper img {
    width: 100% !important;
    height: auto !important;
    max-height: none !important;
    object-fit: contain !important;
  }

  .product-info-col,
  .product-info {
    width: 100% !important;
    max-width: 100% !important;
    margin-top: 12px !important;
  }

  /* Ensure badges remain visible but not huge on mobile */
  .product-image-col .discount-label,
  .product-image-col .avail-badge,
  .product-image-col .new-badge,
  .product-image-col .trending-badge {
    top: 10px;
    right: 10px;
    padding: 5px 8px;
    font-size: 0.85rem;
  }
}

/* --- Safety: prevent accidental horizontal overflow from extremely long strings --- */
.product-info-col * { min-width: 0; }

/* --- Quick visual debugging helper (comment out in production) ---
   If you still see overflow, temporarily enable this to find culprit elements:
   * { outline: 1px dashed rgba(255,0,0,0.06); }
*/